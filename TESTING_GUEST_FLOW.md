# üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≥–æ—Å—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### ‚úÖ –¢–µ—Å—Ç 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –±–µ–∑ –≤—Ö–æ–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç–µ localStorage
2. **–ù–ï** –≤—Ö–æ–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π —Ç–æ–≤–∞—Ä –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
4. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Local Storage
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª—é—á `local_basket` —Å —Ç–æ–≤–∞—Ä–∞–º–∏
   - ‚úÖ –°—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã –≤ –Ω–∞–≤–±–∞—Ä–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
   
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
JSON.parse(localStorage.getItem('local_basket'))
// –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏: { items: [...], timestamp: 1234567890 }
```

### ‚úÖ –¢–µ—Å—Ç 2: –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≥–æ—Å—Ç–µ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞

1. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É (–∫–∞–∫ –≤ –¢–µ—Å—Ç–µ 1)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É ‚Üí –ù–∞–∂–º–∏—Ç–µ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º—É:**
   - ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª—è "–¢–µ–ª–µ—Ñ–æ–Ω" –∏ "Email"
   - ‚úÖ –í—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–∫–∞–∑
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –ó–∞–∫–∞–∑ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ
   - ‚úÖ `local_basket` –¥–æ–ª–∂–µ–Ω –æ—á–∏—Å—Ç–∏—Ç—å—Å—è
   - ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å –ø—É—Å—Ç–æ–π

### ‚úÖ –¢–µ—Å—Ç 3: –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É (email + –ø–∞—Ä–æ–ª—å)
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
4. –ù–∞–∂–º–∏—Ç–µ "–í—ã–π—Ç–∏"
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å –ø—É—Å—Ç–æ–π
   - ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä - –æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ `local_basket`
   - ‚úÖ –ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email

### ‚úÖ –¢–µ—Å—Ç 4: –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –≤—Ö–æ–¥–µ

1. –î–æ–±–∞–≤—å—Ç–µ 2-3 —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É –ë–ï–ó –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
3. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –í Network –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã `POST /api/basket/add` (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Ç–æ–≤–∞—Ä)
   - ‚úÖ `local_basket` –¥–æ–ª–∂–µ–Ω —É–¥–∞–ª–∏—Ç—å—Å—è –∏–∑ localStorage
   - ‚úÖ –°—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ –∂–µ —Ç–æ–≤–∞—Ä—ã
   - ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É - —Ç–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```javascript
// –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

// 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≥–æ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
// (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ React DevTools –∏–ª–∏ —á–µ—Ä–µ–∑ store)
// –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ store:
const basket = /* –ø–æ–ª—É—á–∏—Ç—å basketStore –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ */;
console.log('Is guest:', basket.isGuest);

// 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ—Ä–∑–∏–Ω—É
const localBasket = localStorage.getItem('local_basket');
console.log('Local basket:', localBasket ? JSON.parse(localBasket) : 'empty');

// 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω
console.log('Token:', localStorage.getItem('token') ? 'exists' : 'none');
console.log('Is guest flag:', localStorage.getItem('isGuest'));

// 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
// –í React DevTools –Ω–∞–π–¥–∏—Ç–µ BasketStore –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ totalCount
```

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–≥–æ—Å—Ç—å):
```
localStorage: { token: null, local_basket: {...} }
basket.isGuest: true
basket.items: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ localStorage
–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞: –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email –≤–∏–¥–Ω—ã
```

### –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
```
localStorage: { token: 'jwt...', local_basket: null }
basket.isGuest: false
basket.items: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞: –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email —Å–∫—Ä—ã—Ç—ã
```

### –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞:
```
localStorage: { token: null, local_basket: null }
basket.isGuest: true
basket.items: –ø—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ (–ª–æ–∫–∞–ª—å–Ω–∞—è)
```

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–æ—Ä–∑–∏–Ω–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:
console.log('BasketStore isGuest:', basket.isGuest);
console.log('BasketStore items:', basket.items);
```

### –¢–æ–≤–∞—Ä—ã –Ω–µ –º–∏–≥—Ä–∏—Ä—É—é—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ:
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ë—ã–ª–∏ –ª–∏ —Ç–æ–≤–∞—Ä—ã –≤ local_basket –¥–æ –≤—Ö–æ–¥–∞?
2. –ü–æ—è–≤–∏–ª–∏—Å—å –ª–∏ –∑–∞–ø—Ä–æ—Å—ã POST /api/basket/add –≤ Network?
3. –û—á–∏—Å—Ç–∏–ª—Å—è –ª–∏ local_basket –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞?
```

### –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ CheckoutPage:
console.log('Is guest:', basket.isGuest);
// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
```

## üìä –¢–∞–±–ª–∏—Ü–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

| –°—Ü–µ–Ω–∞—Ä–∏–π | Token | isGuest flag | basket.isGuest | –ö–æ—Ä–∑–∏–Ω–∞ | –ü–æ–ª—è –≤ —Ñ–æ—Ä–º–µ |
|----------|-------|--------------|----------------|---------|--------------|
| –ù–æ–≤—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å | ‚ùå null | ‚ùå –Ω–µ—Ç | ‚úÖ true | localStorage | –¢–µ–ª–µ—Ñ–æ–Ω + Email |
| –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ | ‚ùå —É–¥–∞–ª–µ–Ω | ‚ùå –Ω–µ—Ç | ‚úÖ true | localStorage | –¢–µ–ª–µ—Ñ–æ–Ω + Email |
| –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ | ‚úÖ –µ—Å—Ç—å | ‚ùå –Ω–µ—Ç | ‚ùå false | –°–µ—Ä–≤–µ—Ä | –°–∫—Ä—ã—Ç—ã |
| –ì–æ—Å—Ç–µ–≤–æ–π —Ç–æ–∫–µ–Ω* | ‚úÖ –µ—Å—Ç—å | ‚úÖ 'true' | ‚úÖ true | localStorage | –¢–µ–ª–µ—Ñ–æ–Ω + Email |

*–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `createGuestUser()` API

## üîß –°–±—Ä–æ—Å –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞

```javascript
// –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏:
localStorage.clear();
location.reload();
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

- [ ] –¢–æ–≤–∞—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É –±–µ–∑ –≤—Ö–æ–¥–∞
- [ ] –¢–æ–≤–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
- [ ] –°—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- [ ] –§–æ—Ä–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞/email
- [ ] –ì–æ—Å—Ç–µ–≤–æ–π –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Ç–æ–≤–∞—Ä—ã –º–∏–≥—Ä–∏—Ä—É—é—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é
- [ ] –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã –ª–æ–∫–∞–ª—å–Ω–æ

---

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç? –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üéâ**


